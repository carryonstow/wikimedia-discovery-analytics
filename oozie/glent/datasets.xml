<?xml version="1.0" encoding="UTF-8"?>
<!--
Defines reusable datasets for aggregated pageview percentages data.
Use this dataset in your coordinator.xml files by setting:

    ${glent_data_directory} - Path to directory where glent output data is stored.
                        Example: /user/hive/warehouse/glent.db
    ${event_data_directory} - Path to directory where eventgate logs are stored
                        Example: /wmf/data/event
-->

<datasets>

    <dataset name="glent_m0prep"
            frequency="${coord:days(7)}"
            initial-instance="2019-05-25T00:00Z"
            timezone="Universal">
        <uri-template>${glent_data_directory}/m0prep/part=${YEAR}${MONTH}${DAY}</uri-template>
        <done-flag>_SUCCESS</done-flag>
    </dataset>

    <dataset name="glent_m0run"
            frequency="${coord:days(7)}"
            initial-instance="2019-06-01T00:00Z"
            timezone="Universal">
        <uri-template>${glent_data_directory}/suggestions/algo=m0run/part=${YEAR}${MONTH}${DAY}</uri-template>
        <done-flag>_SUCCESS</done-flag>
    </dataset>

    <dataset name="glent_m1prep"
            frequency="${coord:days(7)}"
            initial-instance="2019-05-25T00:00Z"
            timezone="Universal">
        <uri-template>${glent_data_directory}/m1prep/part=${YEAR}${MONTH}${DAY}</uri-template>
        <done-flag>_SUCCESS</done-flag>
    </dataset>

    <dataset name="glent_m1run"
            frequency="${coord:days(7)}"
            initial-instance="2019-06-01T00:00Z"
            timezone="Universal">
        <uri-template>${glent_data_directory}/suggestions/algo=m1run/part=${YEAR}${MONTH}${DAY}</uri-template>
        <done-flag>_SUCCESS</done-flag>
    </dataset>

    <dataset name="glent_m2run"
            frequency="${coord:days(7)}"
            initial-instance="2019-05-11T00:00Z"
            timezone="Universal">
        <uri-template>${glent_data_directory}/suggestions/algo=m2run/part=${YEAR}${MONTH}${DAY}</uri-template>
        <done-flag>_SUCCESS</done-flag>
    </dataset>

    <dataset name="glent_esbulk"
            frequency="${coord:days(7)}"
            initial-instance="2019-06-01T00:00Z"
            timezone="Universal">
        <uri-template>${glent_data_directory}/esbulk/part=${YEAR}${MONTH}${DAY}</uri-template>
        <done-flag>_SUCCESS</done-flag>
    </dataset>

    <dataset name="event_cirrus"
            frequency="${coord:hours(1)}"
            initial-instance="2019-01-01T00:00Z"
            timezone="Universal">
        <!-- TODO: technically all datacenters data needs to be available -->
        <uri-template>${event_data_directory}/mediawiki_cirrussearch_request/datacenter=eqiad/year=${YEAR}/month=${"$"}{MONTH + 0}/day=${"$"}{DAY + 0}/hour=${"$"}{HOUR + 0}</uri-template>
        <done-flag>_SUCCESS</done-flag>
    </dataset>

</datasets>
