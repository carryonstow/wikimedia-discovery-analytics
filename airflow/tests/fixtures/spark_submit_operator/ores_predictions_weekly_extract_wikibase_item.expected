[
    "PYSPARK_PYTHON=python3.7",
    "spark-submit",
    "--master",
    "yarn",
    "--conf",
    "spark.dynamicAllocation.maxExecutors=20",
    "--conf",
    "spark.executor.memory=4g",
    "--conf",
    "spark.executor.memoryOverhead=1g",
    "--conf",
    "spark.jars.ivy=/tmp/airflow_ivy2",
    "--conf",
    "spark.jars.ivySettings=/etc/maven/ivysettings.xml",
    "--conf",
    "spark.pyspark.python=venv/bin/python3.7",
    "--conf",
    "spark.yarn.maxAppAttempts=1",
    "--files",
    "/etc/mysql/conf.d/analytics-search-client.cnf#mysql.cnf,/srv/mediawiki-config/dblists/s1.dblist,/srv/mediawiki-config/dblists/s2.dblist,/srv/mediawiki-config/dblists/s3.dblist,/srv/mediawiki-config/dblists/s4.dblist,/srv/mediawiki-config/dblists/s5.dblist,/srv/mediawiki-config/dblists/s6.dblist,/srv/mediawiki-config/dblists/s7.dblist,/srv/mediawiki-config/dblists/s8.dblist",
    "--py-files",
    "/srv/deployment/wikimedia/discovery/analytics/spark/wmf_spark.py",
    "--archives",
    "hdfs://analytics-hadoop/wmf/discovery/2020-10-02T19.25.00+00.00-scap_sync_2020-10-02_0005-dirty/environments/mw_sql_to_hive/venv.zip#venv",
    "--packages",
    "mysql:mysql-connector-java:8.0.19",
    "--name",
    "airflow: ores: extract_wikibase_item",
    "--queue",
    "root.default",
    "/srv/deployment/wikimedia/discovery/analytics/spark/mw_sql_to_hive.py",
    "--mysql-defaults-file",
    "mysql.cnf",
    "--dblists",
    "s1.dblist,s2.dblist,s3.dblist,s4.dblist,s5.dblist,s6.dblist,s7.dblist,s8.dblist",
    "--query",
    "\n            SELECT pp_page as page_id, page_namespace, pp_value as wikibase_item\n            FROM page_props\n            JOIN page ON page_id = pp_page\n            WHERE pp_propname=\"wikibase_item\"\n        ",
    "--output-partition",
    "discovery.wikibase_item/year=2038/month=01/day=17"
]